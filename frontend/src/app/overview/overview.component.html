
<div *ngIf="enableEdit() && !(isMobile() && selectedPosition)"> 
  <button *ngIf="enableEdit()" (click)="increaseColumns()">Linie hinzufügen</button>
  <button *ngIf="enableEdit()" (click)="decreaseColumns()">Linie löschen</button>
  <button mat-button *ngIf="enableEdit()" (click)="addPosition()">Position hinzufügen</button>
</div>
<div *ngIf="!(isMobile() && selectedPosition)" cdkDropListGroup>
  <div class="overview-container">
    @for (column of columns(); track $index; let index = $index) {
      <div cdkDropList [cdkDropListData]="column" class="overview-list" (cdkDropListDropped)="drop($event, index)">
        <div class="app-position-header">
          <div class="column-name">Spalte {{index + 1}}</div>
          <div class="column-metrics">
            <div>min</div>
            <div>°C</div>
            <div>A</div>
            <div>V</div>
          </div>
        </div>
        @for (position of column; track position.number) {
          <div class="list-item" cdkDrag [cdkDragDisabled]="!editStateService.enableEdit()" [class.draggable]="editStateService.enableEdit()">
            <app-position  [position]="position"></app-position>
          </div>
        }
      </div>
    }
  </div>
</div>

<app-position-edit *ngIf="selectedPosition" [ngClass]="{'position-edit-overlay': !isMobile(),'position-edit-mobile': isMobile()}" class="position-edit-overlay" [position]="selectedPosition" (savePosition)="savePosition($event)"></app-position-edit>
